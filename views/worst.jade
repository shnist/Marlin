include includes/header
div#page
	div#content
		h1= name
		// export data form
		form(method='post', id='export')
			fieldset
				input(type='submit', name='export-project', value='Export all data')
		include includes/latest_information
		include includes/navigation
			h2 Worst Performing HTTP Rules
				a(href='#tabs', class='no-js') Go to navigation
			p The worst performing rules:
			ul
				-each rule in statistics.worstPerforming
					li= rule.name + ': '
						em(class='error')= rule.score
			div#http-chart.graph								
				table
					caption A table to show the worst performing HTTP rules
					thead
						tr
							th Time of Commit
							-each rule in statistics.worstPerforming
								th= rule.name
					tbody
						-each report in statistics
							tr
								td= new Date(report.date).toLocaleDateString() + '&nbsp;' + new Date(report.date).toLocaleTimeString()
								-each rule in statistics.worstPerforming
									td= rule.score
	
			// form for selecting different rules
			form(method='post', class='rule-options')
				fieldset(class='date collapsible')
					h3.first Change the data range
						span.arrow
					ul
						li
							label(for='http-date-from') From:
							input(type='text', name='http-date-from', id='http-date-from', class='has-date-picker date-from', value='02/01/2012')
						li
							label(for='http-date-to') To:
							input(type='text', name='http-date-to', id='http-date-to', class='has-date-picker date-to', value='02/12/2012')
				fieldset.collapsible
					h3.last Update the rules shown
						span.arrow
					ul
						-var checked=false
						-each rule in statistics[0].http.rules
							-each name in statistics.worstPerforming
									-if (name.id == rule.id)	
										-checked=true
									-else
										-checked=false
							li
								-if (checked === false)
									input(type='checkbox', name='rules[]', value=rule.id, id=rule.id + 'Worst')
									label(for=rule.id + 'Worst')= rule.name
								-else
									input(type='checkbox', name='rules[]', value=rule.id, id=rule.id + 'Worst', checked='checked')
									label(for=rule.id + 'Worst')= rule.name
							
				input(type="submit", name="worst-http", value="Update Worst Performing")
	div#footer
		p Marlin &copy; 2012
	//scripts
	include includes/scripts